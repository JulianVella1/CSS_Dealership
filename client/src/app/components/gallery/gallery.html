<div class="container mt-5">
  <h2 class="mb-4">Current Inventory</h2>

  <div class="mb-4">
    <input type="text" class="form-control form-control-lg" placeholder="Search by make, model, or year..." [(ngModel)]="searchTerm">
  </div>

  @if (filteredCars.length > 0) {
    <div class="row g-4">
      @for (car of filteredCars; track car._id) {
        <div class="col-lg-4 col-md-6">
          <div class="card h-100 shadow-sm border-0 position-relative">
            @if (car.status === 'Sold') {
              <div class="position-absolute top-0 start-0 m-2 badge bg-danger fs-6 shadow">
                SOLD
              </div>
            }@else{
              <div class="position-absolute top-0 start-0 m-2 badge bg-success fs-6 shadow">
                AVAILABLE
              </div>
            }

            <div class="row g-0 h-100">
              <div class="col-6">
                <img [src]="car.image || 'https://placehold.co/200'" class="img-fluid h-100 rounded-start" style="object-fit: cover;" alt="{{ car.make }} {{ car.model }}">
              </div>
              <div class="col-6">
                <div class="card-body d-flex flex-column justify-content-between h-100">
                  <div>
                    <h5 class="card-title">{{ car.make }} {{ car.model }}</h5>
                    <p class="card-text mb-1">
                      <small><strong>Year:</strong> {{ car.year }}</small>
                    </p>
                    <p class="card-text mb-1">
                      <small><strong>Mileage:</strong> {{ car.mileage ? (car.mileage | number) + ' km' : 'N/A' }}</small>
                    </p>
                    <p class="card-text text-success">
                      <strong>â‚¬{{ car.price }}</strong>
                    </p>
                    <p class="card-text">
                      <small class="text-muted">{{ car.condition || 'Used' }}</small>
                    </p>
                  </div>
                  <a [routerLink]="['/cars', car._id]" class="btn btn-sm mt-2 btn-primary">View Details</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="alert alert-info">
      @if (cars.length === 0) {
        No cars stocked at the moment
      } @else {
        No cars match your search. Try a different search term.
      }
    </div>
  }
</div>
